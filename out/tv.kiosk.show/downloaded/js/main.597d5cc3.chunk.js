(this["webpackJsonpkiosk-tv"]=this["webpackJsonpkiosk-tv"]||[]).push([[0],{137:function(e,t,n){e.exports={container:"MaintenancePage_container__3dMg0",bgImage:"MaintenancePage_bgImage__2A09P",image:"MaintenancePage_image__2vysR",headline:"MaintenancePage_headline__z5zhH"}},172:function(e,t,n){e.exports={icon:"Icon_icon__KAUgt",spin:"Icon_spin__2lCqf"}},173:function(e,t,n){e.exports={overlay:"WebBrowser_overlay__SYCz2",webBrowser:"WebBrowser_webBrowser__3Iju2",webBrowserIframe:"WebBrowser_webBrowserIframe__2vahF"}},174:function(e,t,n){e.exports={container:"ChannelMissingView_container__1VOZt",badge:"ChannelMissingView_badge__Q_OgC",infoText:"ChannelMissingView_infoText__pvnFs"}},175:function(e,t,n){e.exports={container:"ScreenBlockedView_container__3CSb0",badge:"ScreenBlockedView_badge__1bmub",infoText:"ScreenBlockedView_infoText__2bvqr"}},176:function(e,t,n){e.exports={container:"OverscanView_container__3VGZG",badge:"OverscanView_badge__27i58",infoText:"OverscanView_infoText__SWON5"}},206:function(e,t,n){e.exports={typography:"Typography_typography__3dEl-",xlBoldHeadline:"Typography_xlBoldHeadline__1hWO3",largeBoldHeadline:"Typography_largeBoldHeadline__2omvP",mediumHeadline:"Typography_mediumHeadline__y_-tL",regularHeadline:"Typography_regularHeadline__3Ey1E",tinyHeadline:"Typography_tinyHeadline__1DQwV",body:"Typography_body__3QwTd",lowerCaseLink:"Typography_lowerCaseLink__2eBHw",upperCaseLink:"Typography_upperCaseLink__235aK",tinyLink:"Typography_tinyLink__2eoai",smallBody:"Typography_smallBody__1zH4A"}},311:function(e){e.exports=JSON.parse('{"msg_tv_maintenance_page_headline":"Patience is a virtue","msg_tv_maintenance_page_body":"Kiosk is down for maintenance. Check back later","msg_tv_screen_blocked_badge":"Blocked","msg_tv_screen_blocked_message":"Screen has been blocked by Kiosk team. \\r\\n Please contact us to re-activate.","msg_tv_register_badge":"Hurray, we\u2019re online","msg_tv_register_message":"Scan the QR code or enter the number to link the TV to your organization","msg_tv_register_code_message":"Lost?\\r\\n Go to ","msg_tv_overscan_badge":"Do you see a red line around the TV screen?","msg_tv_overscan_message":"Some TVs remove some of the outer TV screen. \\r\\n If you don\u2019t see the red line, we\u2019ll correct it.","msg_tv_channel_missing_badge":"No channel","msg_tv_channel_missing_message":"Log in to Kiosk to pick a channel for this TV.","msg_tv_channel_query_error_title":"Channel error","msg_tv_channel_query_error":"Error retrieving channel data","msg_tv_device_query_error_title":"Device error","msg_tv_device_query_error":"Error fetching device info","msg_tv_register_device_query_error_title":"Register device error","msg_tv_register_device_query_error":"Error registering device"}')},316:function(e,t,n){e.exports={logo:"Logo_logo__26Msg"}},319:function(e,t,n){e.exports={screensharingPage:"ScreenSharingPage_screensharingPage__2Rfd-"}},593:function(e,t,n){},634:function(e,t){},636:function(e,t){},65:function(e,t,n){e.exports={app:"HomePage_app__28g97",appContent:"HomePage_appContent__39L3m",noCursor:"HomePage_noCursor__29p_N",showLogo:"HomePage_showLogo__92euJ",showLogoVisible:"HomePage_showLogoVisible__fBaz6",screenName:"HomePage_screenName__pqD4Q",screenTime:"HomePage_screenTime__314dl",infoBlock:"HomePage_infoBlock__2RciI",organizationLogo:"HomePage_organizationLogo__303EN",screenNameContainer:"HomePage_screenNameContainer__3ONL3"}},659:function(e,t,n){"use strict";n.r(t);n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(350),n(351),n(143),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(368),n(369),n(371),n(372),n(192),n(373),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(385),n(386),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(408),n(409),n(410),n(411),n(412),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(245),n(425),n(426),n(247),n(427),n(428),n(429),n(430),n(248),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(439),n(440),n(441),n(442),n(443),n(444),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(200),n(479),n(480),n(482),n(483),n(484),n(485),n(486),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(520),n(521),n(522),n(523),n(524),n(526),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(558),n(560),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(578),n(259);var r,i,a=n(4),o=(n(260),n(0)),c=n(89),s=n.n(c),l=n(667),A=n(321),d=n(29),u=n(302),b=document.kiosk,f=!!b,g={isElectron:f,appVersion:f?b.appVersion:void 0,tvAppVersion:"0.34.0",osInfo:f?b.osInfo:void 0,machineId:f?b.machineId:void 0,sentryDsn:"https://4801fb358b9345d796bcc35f40ebd7da@o352043.ingest.sentry.io/5228000",sentryRelease:"0.34.0",apiGraphqlUrl:"https://backend.kiosk.show/graphql/",cmsUrl:"https://cms.kiosk.show/",pusherAppKey:"93b33a60ded72bd32287",pusherCluster:"eu",pusherAuthUrl:"https://backend.kiosk.show/api/screen-auth/"},v=n(47),p=n(267),m=g.isElectron?b.logger:console,h=function(e){return"React App: ".concat(e)},O={error:function(e){"string"===typeof e?v.captureMessage(e,p.a.Error):v.captureException(e),m.error(h(e))},info:function(e){return m.info(h(e))},warn:function(e){return m.warn(h(e))},debug:function(e){return m.warn(h(e))}},j=n(75),w=Object(j.a)(),_=5e3,E=1920,y=1080;!function(e){e.Home="/",e.Maintenance="/maintenance",e.Screensharing="/screensharing"}(r||(r={})),function(e){e.UpdateScreen="UPDATE_SCREEN",e.DeleteScreen="DELETE_SCREEN",e.UpdateChannel="UPDATE_CHANNEL",e.UpdateShow="UPDATE_SHOW",e.ChangeView="CHANGE_VIEW",e.ChangeRotation="CHANGE_ROTATION",e.NewVersionRelease="NEW_VERSION_RELEASE",e.ReloadTvClient="RELOAD_TV_CLIENT",e.WebRtcStart="client-WEBRTC_START",e.WebRtcAccept="client-WEBRTC_ACCEPT",e.WebRtcEnd="client-WEBRTC_END"}(i||(i={}));var C,V=new(n(307).SentryLink)({breadcrumb:{includeError:!0,includeVariables:!0,includeResponse:!0}}),x=new d.HttpLink({uri:g.apiGraphqlUrl}),F=Object(u.a)((function(e){var t=e.graphQLErrors,n=void 0===t?[]:t,i=e.networkError;e.response,e.operation;i&&"statusCode"in i&&503===i.statusCode?w.push(r.Maintenance):((null===i||void 0===i?void 0:i.message)&&O.error(i.message),n.forEach((function(e){O.error("[GRAPHQL error]: ".concat(JSON.stringify(e)))})))})),H=new d.ApolloClient({uri:g.apiGraphqlUrl,cache:new d.InMemoryCache,link:d.ApolloLink.from([V,F,x])}),N=(n(593),n(204)),B=n.n(N),S=n(308),T=n(61),R=n(205),I=n.n(R),k=n(309),M=n.n(k),L=n(30);function P(e,t){var n,r;switch(console.log("action: ",t.type," : ",t.payload),t.type){case"UpdateDeviceContent":return Object(L.a)(Object(L.a)({},e),{},{currentChannel:null===(n=t.payload)||void 0===n?void 0:n.subscribedChannel,currentShow:null===(r=t.payload)||void 0===r?void 0:r.subscribedShow});case"UpdateDevice":return Object(L.a)(Object(L.a)({},e),{},{device:t.payload});case"UpdateScreen":return Object(L.a)(Object(L.a)({},e),{},{screen:t.payload,screenBlocked:!1});case"BlockScreen":return Object(L.a)(Object(L.a)({},e),{},{screenBlocked:!0});case"ChangeActiveView":return Object(L.a)(Object(L.a)({},e),{},{activeView:t.payload.view});case"ChangeRotation":var i=e.screen;return i?Object(L.a)(Object(L.a)({},e),{},{screen:Object(L.a)(Object(L.a)({},i),{},{rotation:t.payload.rotation})}):e;case"SetVideoStream":return Object(L.a)(Object(L.a)({},e),{},{videoStream:t.payload});default:return e}}!function(e){e.Overscan="OVERSCAN"}(C||(C={}));var D,W,Z,q,z,U,G,Q,X,K,Y,J,$,ee=n(76);function te(){var e=Object(ee.a)(["\n    mutation registerDevice($input: RegisterDeviceMutationInput!) {\n  registerDevice(input: $input) {\n    device {\n      ...PublicScreen\n    }\n  }\n}\n    ",""]);return te=function(){return e},e}function ne(){var e=Object(ee.a)(["\n    query networkTransversalCredential {\n  networkTransversalCredential {\n    username\n    iceServers {\n      username\n      credential\n      url\n      urls\n    }\n    dateUpdated\n    accountSid\n    ttl\n    dateCreated\n    password\n  }\n}\n    "]);return ne=function(){return e},e}function re(){var e=Object(ee.a)(["\n    query deviceContent($id: ID!) {\n  device(id: $id) {\n    ...DeviceContent\n  }\n}\n    ",""]);return re=function(){return e},e}function ie(){var e=Object(ee.a)(["\n    query device($id: ID!) {\n  device(id: $id) {\n    ...Device\n  }\n}\n    ",""]);return ie=function(){return e},e}function ae(){var e=Object(ee.a)(["\n    fragment PublicScreen on PublicScreenNode {\n  id\n  createdAt\n  deviceNodeId\n  registrationCode\n}\n    "]);return ae=function(){return e},e}function oe(){var e=Object(ee.a)(["\n    fragment DeviceContent on DeviceNode {\n  id\n  subscribedChannel {\n    ...Channel\n  }\n  subscribedShow {\n    ...Show\n  }\n}\n    ","\n",""]);return oe=function(){return e},e}function ce(){var e=Object(ee.a)(["\n    fragment Channel on ChannelNode {\n  id\n  name\n  shows {\n    sortOrder\n    show {\n      ...Show\n    }\n  }\n}\n    ",""]);return ce=function(){return e},e}function se(){var e=Object(ee.a)(["\n    fragment Show on ShowNode {\n  id\n  slides {\n    duration\n    renderedHtml\n  }\n}\n    "]);return se=function(){return e},e}function le(){var e=Object(ee.a)(["\n    fragment Device on DeviceNode {\n  id\n  name\n  organization {\n    id\n    avatar\n  }\n  isScreenInfoVisible\n  rotation\n  overscanEnabled\n  electronReleaseChannel\n  subscribedChannel {\n    id\n  }\n  subscribedShow {\n    id\n  }\n}\n    "]);return le=function(){return e},e}!function(e){e.Giphy="GIPHY",e.Unsplash="UNSPLASH"}(D||(D={})),function(e){e.Organization="ORGANIZATION"}(W||(W={})),function(e){e.Owner="OWNER",e.Admin="ADMIN",e.Editor="EDITOR"}(Z||(Z={})),function(e){e.Dropbox="DROPBOX",e.Slack="SLACK"}(q||(q={})),function(e){e.Owner="OWNER",e.Admin="ADMIN",e.Editor="EDITOR"}(z||(z={})),function(e){e.Rendered="RENDERED",e.Rendering="RENDERING",e.Error="ERROR"}(U||(U={})),function(e){e.Show="show",e.Slide="slide"}(G||(G={})),function(e){e.Electron="ELECTRON",e.Browser="BROWSER",e.Chromecast="CHROMECAST",e.Android="ANDROID",e.Firetv="FIRETV"}(Q||(Q={})),function(e){e.Rotation_0="ROTATION_0",e.Rotation_90="ROTATION_90",e.Rotation_180="ROTATION_180",e.Rotation_270="ROTATION_270"}(X||(X={})),function(e){e.Latest="LATEST",e.Beta="BETA",e.Alpha="ALPHA"}(K||(K={})),function(e){e.Electron="ELECTRON",e.Browser="BROWSER",e.Chromecast="CHROMECAST",e.Android="ANDROID",e.Firetv="FIRETV"}(Y||(Y={})),function(e){e.Admin="ADMIN",e.Editor="EDITOR"}(J||(J={})),function(e){e.Dropbox="DROPBOX",e.Slack="SLACK"}($||($={}));var Ae=Object(d.gql)(le()),de=Object(d.gql)(se()),ue=Object(d.gql)(ce(),de),be=Object(d.gql)(oe(),ue,de),fe=Object(d.gql)(ae()),ge=Object(d.gql)(ie(),Ae);function ve(e){return d.useQuery(ge,e)}var pe=Object(d.gql)(re(),be);var me=Object(d.gql)(ne());var he=Object(d.gql)(te(),fe);var Oe,je=g.isElectron?b.store:{set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e,t){var n=localStorage.getItem(e);return void 0===n||"undefined"===n?t:null===n?null:JSON.parse(n)},delete:function(e){localStorage.removeItem(e)}},we=(n(644),n(109)),_e=n(50),Ee=n.n(_e),ye=n(206),Ce=n.n(ye);!function(e){e.XLBoldHeadline="xlBoldHeadline",e.LargeBoldHeadline="largeBoldHeadline",e.MediumHeadline="mediumHeadline",e.RegularHeadline="regularHeadline",e.TinyHeadline="tinyHeadline",e.Body="body",e.LowerCaseLink="lowerCaseLink",e.UpperCaseLink="upperCaseLink",e.TinyLink="tinyLink",e.SmallBody="smallBody"}(Oe||(Oe={}));var Ve=function(e){var t=e.WrapperElement,n=void 0===t?"span":t,r=e.wrapperProps,i=e.styleType,o=void 0===i?Oe.Body:i,c=e.children,s=e.className,l=e.id;return Object(a.jsx)(n,Object(L.a)(Object(L.a)({id:l,className:Ee()(Ce.a.typography,Ce.a[o],s)},r),{},{children:c}))},xe=n(90),Fe=n.n(xe),He=n(172),Ne=n.n(He),Be=function(){};function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Re=o.createElement("g",{clipPath:"url(#clip0)"},o.createElement("path",{d:"M24.5423 12.5212C24.5423 19.1602 19.1602 24.5423 12.5212 24.5423C5.88205 24.5423 0.5 19.1602 0.5 12.5212C0.5 5.88205 5.88205 0.5 12.5212 0.5C19.1602 0.5 24.5423 5.88205 24.5423 12.5212Z",stroke:"white"}),o.createElement("path",{d:"M7.74112 7.74121L17.2589 17.259",stroke:"white",strokeMiterlimit:10}),o.createElement("path",{d:"M7.74112 17.259L17.2589 7.74121",stroke:"white",strokeMiterlimit:10})),Ie=o.createElement("defs",null,o.createElement("clipPath",{id:"clip0"},o.createElement("rect",{width:25,height:25,fill:"white"})));function ke(e,t){var n=e.title,r=e.titleId,i=Te(e,["title","titleId"]);return o.createElement("svg",Se({width:25,height:25,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?o.createElement("title",{id:r},n):null,Re,Ie)}var Me=o.forwardRef(ke);n.p;function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var De=o.createElement("path",{d:"M10.4412 2.5H9.46082V5.34314H10.4412V2.5Z",fill:"white"}),We=o.createElement("path",{d:"M14.9247 4.25829L12.9143 6.26868L13.6075 6.96191L15.6179 4.95153L14.9247 4.25829Z",fill:"white"}),Ze=o.createElement("path",{d:"M17.5 9.46082H14.6569V10.4412H17.5V9.46082Z",fill:"white"}),qe=o.createElement("path",{d:"M13.6437 12.9404L12.9504 13.6337L14.9608 15.6441L15.6541 14.9508L13.6437 12.9404Z",fill:"white"}),ze=o.createElement("path",{d:"M10.4412 14.6569H9.46082V17.5H10.4412V14.6569Z",fill:"white"}),Ue=o.createElement("path",{d:"M6.34828 12.9071L4.33789 14.9175L5.03113 15.6107L7.04151 13.6003L6.34828 12.9071Z",fill:"white"}),Ge=o.createElement("path",{d:"M5.34314 9.46082H2.5V10.4412H5.34314V9.46082Z",fill:"white"});function Qe(e,t){var n=e.title,r=e.titleId,i=Pe(e,["title","titleId"]);return o.createElement("svg",Le({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?o.createElement("title",{id:r},n):null,De,We,Ze,qe,ze,Ue,Ge)}var Xe,Ke=o.forwardRef(Qe);n.p;!function(e){e.Close="close",e.Loading="loading"}(Xe||(Xe={}));var Ye=function(e){var t=e.icon,n=e.className,r=e.onClick,i=void 0===r?Be:r;return t===Xe.Loading?Object(a.jsx)(Ke,{className:Ee()(Ne.a.icon,Ne.a.spin,n)}):t===Xe.Close?Object(a.jsx)(Me,{onClick:i,className:Ee()(Ne.a.icon,n)}):null},Je=function(e){var t=e.title,n=e.text;return Object(a.jsxs)("div",{className:Fe.a.toastError,children:[Object(a.jsx)(Ve,{WrapperElement:"div",className:Fe.a.toastTitle,styleType:Oe.UpperCaseLink,children:t}),Object(a.jsx)(Ve,{WrapperElement:"div",children:n})]})},$e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;Object(we.c)(Object(a.jsx)(Je,{title:e,text:t}),{closeButton:Object(a.jsx)(Ye,{icon:Xe.Close}),hideProgressBar:!0,autoClose:n})},et={autoClose:_,className:Fe.a.toastContainer,transition:we.b,position:"top-right",draggable:!1,toastClassName:Fe.a.toast},tt=function(e){var t=Object(o.useRef)();return Object(o.useEffect)((function(){t.current=e}),[e]),t.current},nt=n(310),rt=n.n(nt),it=n(315),at=n(210),ot=n(136),ct=n(669),st=n(311);at.a.use(ot.e).init({lng:"en",fallbackLng:"en",resources:{en:{translation:st}},saveMissing:!0,missingKeyHandler:function(e,t,n){O.error("Missing translation key: ".concat(n))},interpolation:{escapeValue:!1}});var lt=function(){var e=Object(ct.a)().t;return Object(o.useCallback)((function(t,n){return e(t,n)}),[e])},At=(at.a,Object(o.createContext)({currentChannel:void 0,currentShow:void 0,device:void 0,screen:void 0,screenBlocked:!1,activeView:void 0,videoStream:void 0})),dt=function(e){var t,n,c,s,l,A,u,b=e.children,f=Object(it.e)(),v=Object(o.useReducer)(P,{screenBlocked:!1}),p=Object(T.a)(v,2),m=p[0],h=p[1],j=lt(),w=Object(o.useState)(""),_=Object(T.a)(w,2),E=_[0],y=_[1],C=Object(o.useState)(),V=Object(T.a)(C,2),x=V[0],F=V[1],H=Object(o.useRef)();Object(o.useEffect)((function(){I.a.head("/").then((function(e){y(e.headers.etag)}))}),[]);var N=null===(t=m.device)||void 0===t?void 0:t.deviceNodeId;Object(o.useEffect)((function(){if(N){var e=new rt.a(g.pusherAppKey,{cluster:g.pusherCluster,authEndpoint:g.pusherAuthUrl,auth:{headers:{"X-DEVICE-AUTHORIZATION":N}}});e.connection.bind("error",(function(e){var t,n;e&&1006===(null===(t=e.error)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code)||O.error("Pusher error ".concat(JSON.stringify(e.error?e.error:e)))})),F(e)}}),[N]);var R,k=(R={variables:{id:N||""},context:{headers:{"X-device-authorization":N}},skip:!N,onCompleted:function(e){e&&h({type:"UpdateDeviceContent",payload:e.device})},onError:function(){$e(j("msg_tv_channel_query_error_title"),j("msg_tv_channel_query_error"))},notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"},d.useQuery(pe,R)).refetch,L=ve({variables:{id:N||""},context:{headers:{"X-device-authorization":N}},skip:!N,onCompleted:function(e){var t,n,r,i,a,o;(null===e||void 0===e?void 0:e.device)&&((null===(t=e.device.subscribedChannel)||void 0===t?void 0:t.id)===(null===(n=m.screen)||void 0===n||null===(r=n.subscribedChannel)||void 0===r?void 0:r.id)&&(null===(i=e.device.subscribedShow)||void 0===i?void 0:i.id)===(null===(a=m.screen)||void 0===a||null===(o=a.subscribedShow)||void 0===o?void 0:o.id)||k(),g.isElectron&&document.kiosk.ipcRenderer.send("DEVICE_UPDATE",JSON.stringify(e.device)),h({type:"UpdateScreen",payload:e.device}))},onError:function(e){var t=e.graphQLErrors[0];"error_screens_blocked"!==(null===t||void 0===t?void 0:t.message)?$e(j("msg_tv_device_query_error_title"),j("msg_tv_device_query_error")):h({type:"BlockScreen",payload:{}})},notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}).refetch,D=null===(n=function(e){return d.useQuery(me,e)}({context:{headers:{"X-device-authorization":N}},skip:!N,fetchPolicy:"network-only"}).data)||void 0===n||null===(c=n.networkTransversalCredential)||void 0===c?void 0:c.iceServers,W=function(e){return d.useMutation(he,e)}({onCompleted:function(e){var t=e.registerDevice.device;t&&(h({type:"UpdateDevice",payload:t}),je.set("deviceId",t.id))},onError:function(e){var t,n;"error_screen_was_deleted"!==(null===(t=e.graphQLErrors)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.message)&&$e(j("msg_tv_register_device_query_error_title"),j("msg_tv_register_device_query_error")),e.networkError?setTimeout((function(){q()}),1e4):(je.delete("deviceId"),q())}}),Z=Object(T.a)(W,1)[0],q=Object(o.useCallback)((function(){Z({variables:{input:{deviceType:g.isElectron?Y.Electron:navigator.userAgent.includes("CrKey")?Y.Chromecast:navigator.userAgent.includes("Kiosk Android")?Y.Android:/AFT.*Build/i.test(navigator.userAgent)?Y.Firetv:Y.Browser,deviceId:je.get("deviceId"),uniqueMachineId:g.machineId,appVersion:g.appVersion,tvAppVersion:g.tvAppVersion,osInfo:g.osInfo}}})}),[Z]);Object(o.useEffect)((function(){if(!N||!x)return Be;var e=x.subscribe(N);return e.bind(i.UpdateScreen,(function(){L()})),e.bind(i.DeleteScreen,(function(){je.delete("deviceId"),q()})),e.bind(i.ChangeView,(function(e){h({type:"ChangeActiveView",payload:e})})),e.bind(i.ChangeRotation,(function(e){h({type:"ChangeRotation",payload:e})})),function(){e.unbind(),x.unsubscribe(N)}}),[N,L,q,x]),Object(o.useEffect)((function(){if(!N||!x)return Be;var e="private-".concat(N),t=x.subscribe(e);return t.bind(i.WebRtcStart,(function(e){var n=new M.a({config:{iceServers:D},trickle:!1,initiator:!1});n.on("signal",(function(e){t.trigger(i.WebRtcAccept,e)})),n.on("error",(function(e){h({type:"SetVideoStream",payload:void 0}),f.push(r.Home)})),n.on("end",(function(){h({type:"SetVideoStream",payload:void 0}),f.push(r.Home)})),n.on("close",(function(){h({type:"SetVideoStream",payload:void 0}),f.push(r.Home)})),n.on("stream",(function(e){h({type:"SetVideoStream",payload:e}),f.push(r.Screensharing)})),n.signal(e),H.current=n})),t.bind(i.WebRtcEnd,(function(){var e;null===(e=H.current)||void 0===e||e.destroy(),f.push(r.Home)})),function(){t.unbind(),x.unsubscribe(e)}}),[N,x,f,D]);var z=null===(s=m.screen)||void 0===s||null===(l=s.organization)||void 0===l?void 0:l.id;Object(o.useEffect)((function(){return z&&x?(x.subscribe("presence-".concat(z)),function(){x.unsubscribe("presence-".concat(z))}):Be}),[z,x]);var U=null===(A=m.screen)||void 0===A||null===(u=A.subscribedChannel)||void 0===u?void 0:u.id;Object(o.useEffect)((function(){if(!U||!x)return Be;var e=x.subscribe(U);return e.bind(i.UpdateChannel,(function(){k()})),function(){e.unbind(),x.unsubscribe(U)}}),[U,k,x]);var G=Object(o.useMemo)((function(){return m.currentChannel?m.currentChannel.shows.map((function(e){return e.show.id})):m.currentShow?[m.currentShow.id]:[]}),[m.currentChannel,m.currentShow]),Q=tt(G);return Object(o.useEffect)((function(){if(!x)return Be;var e=Q?G.filter((function(e){return!Q.includes(e)})):G,t=Q?Q.filter((function(e){return!G.includes(e)})):[];e.forEach((function(e){x.subscribe(e).bind(i.UpdateShow,(function(){k()}))})),t.forEach((function(e){x.channel(e)&&(x.channel(e).unbind(),x.unsubscribe(e))}))}),[Q,k,G,x]),Object(o.useEffect)((function(){q()}),[q]),Object(o.useEffect)((function(){if(!x)return Be;var e=x.subscribe("GLOBAL");return e.bind(i.NewVersionRelease,(function(){setInterval(Object(S.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.head("/");case 2:t=e.sent,E!==t.headers.etag&&window.location.reload();case 4:case"end":return e.stop()}}),e)}))),3e3),setTimeout((function(){window.location.reload()}),3e5)})),e.bind(i.ReloadTvClient,(function(){window.location.reload()})),function(){e.unbind(),x.unsubscribe("GLOBAL")}}),[E,x]),Object(a.jsx)(At.Provider,{value:m,children:b})},ut=n(73),bt=n(173),ft=n.n(bt);var gt=function(e){var t=e.url,n=void 0===t?"kiosk_pages/no_data.html":t,r=e.html,i=void 0===r?void 0:r,c=Object(o.useContext)(At).screen,s=(null===c||void 0===c?void 0:c.rotation)===X.Rotation_0||(null===c||void 0===c?void 0:c.rotation)===X.Rotation_180;return Object(a.jsxs)("div",{className:ft.a.webBrowser,children:[Object(a.jsx)("div",{className:ft.a.overlay}),Object(a.jsx)("iframe",Object(L.a)(Object(L.a)({},i?{srcDoc:i}:{src:n}),{},{title:"KioskViewer",className:ft.a.webBrowserIframe,style:{width:"".concat(s?E:y,"px"),height:"".concat(s?y:E,"px")},frameBorder:"0",scrolling:"no"}),null===c||void 0===c?void 0:c.rotation)]})},vt=function(){var e=Object(o.useContext)(At),t=e.currentChannel,n=e.currentShow,r=Object(o.useState)({currentIndex:0,prerenderIndex:void 0}),i=Object(T.a)(r,2),c=i[0],s=c.currentIndex,l=c.prerenderIndex,A=i[1],d=Object(o.useState)([]),u=Object(T.a)(d,2),b=u[0],f=u[1],g=Object(o.useState)(!0),v=Object(T.a)(g,2),p=v[0],m=v[1],h=Object(o.useState)(!1),O=Object(T.a)(h,2),j=O[0],w=O[1];return Object(o.useEffect)((function(){m(!0),A({currentIndex:0,prerenderIndex:void 0}),f(t?t.shows.flatMap((function(e){return e.show.slides})):n?n.slides:[]);var e=setTimeout((function(){m(!1)}),300);return function(){clearTimeout(e)}}),[t,n]),Object(o.useEffect)((function(){if(1===b.length){var e=setInterval((function(){w((function(e){return!e}))}),1e3*b[s].duration);return function(){clearInterval(e)}}}),[b,s]),Object(o.useEffect)((function(){if(b.length<2)return Be;var e=s===b.length-1?0:s+1,t=1e3*b[s].duration,n=setTimeout((function(){A({currentIndex:e,prerenderIndex:void 0})}),t),r=setTimeout((function(){A({currentIndex:s,prerenderIndex:e})}),t-500);return function(){clearTimeout(n),clearTimeout(r)}}),[b,s]),p?Object(a.jsx)(gt,{url:"kiosk_pages/channel_static.html"}):b.length?1===b.length?Object(a.jsx)(gt,{html:b[0].renderedHtml},String(j)):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(gt,{html:b[s].renderedHtml},s),l&&Object(a.jsx)(gt,{html:b[l].renderedHtml},l)]}):Object(a.jsx)(gt,{url:"kiosk_pages/no_shows.html"})},pt=n(316),mt=n.n(pt);var ht,Ot=function(){return Object(a.jsx)("div",{className:mt.a.logo,children:Object(a.jsx)("img",{alt:"logo",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA2wAAAEsCAYAAAC/qzAUAAAACXBIWXMAAG66AABuugHW3rEXAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABpKSURBVHgB7d1djFzlmSfw563uhrbZ2OVokQI2cTkSEvhiY6JEMBeztqMwSiLNkHi4WYkJSWY1e5UvNKvM7khJiDQ7QYpIGC5WinYWSLiItIiPRBo2AcV25gZYJJuLxUiR1mXWECSP5Goj7IaurnfOaXc7Bre7qj+q6lT17wenq7r7bdtddtc5/3re93lT0BfT043G/PxcvTNR25dz2l6rxZ6Uattzzo1IUc856otD6yku3QcAgMrIEa24eBSXsNFcuE2pmXNnptOJk2kin0qd3GpPTx6PVrMVbLgUrEsZzOZq8/vyfNo9UYazyEVAi4YQBgDAZlKGu5SKUJfLI78S0TkiyK2fwLZKk9O7DnRy7eO1WjpQ/KPcVzyAjQAAAJZVXDM3i2vm451OPlJLnVfas6ePBD0T2LqYmtq5b742sb8IaF9YDGgqZwAAsEYLlbiLAe7pic780bm5N44HVyWwLaOsokWqFQEt3aWCBgAA/VNW4CLlI6nTeUz17UoC26LLQtq9qmgAADB4wtuVNndgqzfqk+91vpFz+qaQBgAA1XFx7Vt+pp1rP47ZZjM2qU0Z2C5W0ya+W9w9EAAAQNUdyTk/Oj/7+mOxyWyewKaaBgAAI62oup2MnO+fj9rRzVJ1G//AJqgBAMBYubjWLY7Md9L94x7cxjewCWoAADD2copHxzm4jV9gE9QAAGDTGdfgNj6BTVADAIBNbaGzZMqPts+/fn+MibEIbBNbb/pC5NqPbHINAABcak4yBl0lRzuwTTcakyk/EtrzAwAAV3qqndN9ozxNciJG1OTWj363SJuPFsctAQAAcKVbaym+Ubtme3TmZo7GCBq5Clu56XVOE4+Y/ggAAPSqnCY5n9OnR63aVosRMrnloz+KNHFYWAMAAFajyBB7JlP+f+VMvRgho1FhK9eq1fJTRSzeFwAAAOswStW2yq9hm9rS+EZK+eeqagAAwEYossWOWop7J6a2v9tpz7wQFVbdwFbuq5a2/X1x73vFAzodAAAAG2dLEd0+W5vavr3zb3a8GLOt2aigak6JNAUSAAAYkCpPkaxc05GyC+REyseENQAAYBDKhiRFBvlNmUWiYio1JbJcrxYp/dwUSAAAYJDKdW2RavdWbc+2ygS2ya2N7xbFyB8EAADAcBS5Le2vUmgbfmCrN+oTtW3/PeX4ZgAAAAxXGdoOpGu2785zM8/EkA236UjZCfK9fNh6NQAAoHJSHGtfkz4drWYrhmR4TUfKTpDCGgAAUFU5bisyy2/K7BJDMpwKW/ENT6R82GbYAABA1Q2z7f/gA5uwBgAAjJhhhbbBBjZhDQAAGFHDCG2DW8NWNhip5aeENQAAYBSVG2wXmebJMtvEgAwssGkwAgAAjLylRiQDCm0DCWwTWz/6iLAGAACMhSK0TbzXeTAGoO8bZ09ubXzXptgAAMA4SZH21a7ZHp25maPRR30NbGVYi5y/FwAAAOMlFf/vn5jaPtNpz7wQfdK3LpGT07sORJo4HAAAAOMrR57/dHv29JHog/4ENu37AQCAzeNsO6dP9KPd/8Y3Hak36sIaAACwiezoV7v/DV/DNpm2/X2K9NkAAADYPG6ozedrO+2ZX8UG2tDANrWl8Y3i5nsBAACw6aQ7NroJycatYbu4bu1Y8QsObNdvAACAitnQ9WwbtoZtcd2asAYAAGxmF9ezbZANmRK5sDl2xBcCAACAG2pT27dvxHq29U+JnG40JlM+GQAAACzZkP3Z1j0lspwKGQAAAFwu5TTxP2Od1jUl0lRIAACA5RVZaUdtcnvqtGeOxBqtfUqkqZAAAADdrKtr5JqnRE6m+FEAAACwkh1FoWvNUyPXFNgmpm/6ckQ2FRIAAKC7AxNbb1pTflrTlMiJLbtPFl/YCAAAALrKESfnr02fiFaztZqvW3WFbbHRSCMAAADoSZGh9kzOdr4Zq7S6Ctt0o1G28RfYAAAAVu1s+9r0sdVU2VbV1n9ictuPU0oHAgAAgNXaUmvnd1fT5r/3Cps2/gAAAOu1qipbz2vYJqLzvQAAAGA9dqxmLVtvFTbVNQAAgI3Sc5Wtpwqb6hoAAMCG6bnK1r3CpjMkAADARuupyta1wjYR8weENQAAgA3VU5Wta4VtYsvukwIbAADAhjvbvnDqwysNWLHCNjF905eFNQAAgL6oT07vOrDSgBUDW0q1ewMAAIB+SJEmvrPygKvRyh8AAKDfcvva9OGrNR+5aoVtMvW+mRsAAABrklZqPnLVCptmIwAAAANx1eYjy1bYJqcbWvkDAAAMxlWbjywb2HJ0vhwAAAAMQopUu2u5Tyy/hi2l/QEAAMCApGU79F8R2EyHBAAAGLhlp0VeEdhMhwQAABi4ZadFXjkl0nRIAACAgcuRugS26xr7TIcEAAAYvDKLTU019l3+sfcFtql2HAgAAACGY7Jz4PJ33xfYci3fFQAAAAxDypH+7PIPfHAN274AAABgWJafElm28y9u6gEAAMCwvK+9/6XAVtTeVNcAAACGLKXapWw2uXSnU8v7UzBMuw/ti089cChG2RM3fydG1TAe/1f/4XC8+vDhqJLPHb4vrts1usX2l7/9VDSfPBaj5kv33B3/+JMfBsORc447P/sf4ug/vxBjqTjBf+43o/2zvRmceeFkHP2LR6Iyin83+3/2lbj+9j0xit453YpnDz4YI2sYj3/xXPhPB38U599oBUNV1NKi3Grtx+U7l69hU2EDAAAYshzp40v3Lwa2eqNu/zUAAIDhK7PZ9HSjUd5fCGyTs6prAAAAVTHXiYUq2+KUyPdvzgYAAMDw1CY6CwsYFwJbTn+YIwkAAMBQpVjMaJMX37N+DQBGTf3Wj8TH//ZzPY3VIRJgtOQcfwhsIbABwMiZ2j49si3XAeiqEXEgamWHyOIdL7sBAABUR316utmYXOgQacfsvis3Ze5mHF4l7eX7PH+6FWdeasagTG2bjhs/c0vXccN4/Ot7P9LTY/bm86/F3LnZWI9y6tT24lhJ49BtIz9t6t/e3ohc/NfNRjymvXj+Vz+P/X98R1BtKaX4sz/9k9i9e9eK41oz5+IXv/x1QD9s3bWjp3PCmReb697YeOvOenHea3QdV55DR9U1H5ru6fGcOfFWtIpjkHo5J5cG//in2HnnrfHeuQsrjirPn+V5lP6bn496mth60xdSrj0V9NXdv/t+cFHzyePx8refjEEpT0qfP3JfjLKj9zxSnKBPxnrs/drB2Pv1g8FF/3TgwXVf8PRCYBsvzeb/j5v3/nFUxfV3NGL/z74abCLF61Ev/81Txbn0WKzH7j/fF5/6waHY9IrH89WHDy8cgzTq5+R3ihffnz34YNB3OefOV2u1+YlGAAAAUCm1lOq1XOs0AgAAgCpJRRF4dy1nDUcAAACqJqXYXlTZ0u4AAACgUnInNWoBAABA9aSol1MiGwEAAECl5CgCWwAAAFBJtZQ0HQEAAKiatFhhE9gAAACqpz4ZMML2P/6VuP72PQHD8D9+8sO49567g82j0bgp5s43u4577Gf/K/7jf/rPsR5bd9Xj84fvC2B0+LmlH6xhAwAAqCiBDQAAoKIENgAAgIoS2AAAACpKYAMAAKgogQ0AAKCiBDYAAICKEtgAAAAqysbZVNaNd94SUx+aXnHM1LaVP191rRO/L463uo6bOzcbUHU/ffyJGKTt27fFXX/6JwHj4p3TrTjz0snu4944GwxeL9cl12zbEqPuzedOxHtvr3zdMTfjumSQBDYq6+Z7/yiuv31PjLM3n3stXn34cMCoyznHX/7VX8cgNRo3CWyMlfOnz8bL334qqKC0Oa5LiifzOP53z8b5N1pBdZgSCQAAUFECGwAAQEUJbAAAABUlsAEAAFSUwAYAAFBRAhsAAEBFCWwAAAAVJbABAABUlI2zGbjrb2/EJx/4YtdxW3ftiFE1d252YePJbmZO/D4AWFmreK783aMvxLgrzx0MWIq48c5bimuOeteho3xdUnrz+RPxxnOvdR0397Z/h1UjsDFw1+2sx3WHbotx9l7xZHfqyWMBwPrNzXhOpX/qt96wcIy1XLzw8epbfo5GlCmRAAAAFSWwAQAAVJTABgAAUFECGwAAQEUJbAAAABUlsAEAAFSUwAYAAFBRAhsAAEBF2TgbVunoPY/EmRdPBgCDcf0de+Lu330/xt2ZF07G0b94JGA13jndimcPPhiMLxU2AACAihLYAAAAKkpgAwAAqCiBDQAAoKIENgAAgIoS2AAAACpKYAMAAKgogQ0AAKCiBDYAAICKmgxgwZkXT0bzyeNdx71z+mwAwEar770hPvnAF7uOO/XkseKc1QzGXI549eHD8c4brRWHzZ2bDcabwAaL3nljZuEkCADDMLVtOhqHblt5UHER/y9FWDsTzWD8nXmpufCCMpubKZEAAAAVJbABAABUlMAGAABQUQIbAABARQlsAAAAFSWwAQAAVJTABgAAUFECGwAAQEXZOBsWNQ7tWzi6OXrPIzaxBPru/OlWPHHzd7qO2/u1g7H36wcDGDMpYv/jX+k67J3iueLZgw8G40uFDQAAoKIENgAAgIoS2AAAACpKYAMAAKgogQ0AAKCiBDYAAICKEtgAAAAqSmADAACoKBtnwyrd+JlbYuvO7SuOmTs3G28+/1oA9FvrxO+j+eSxoHfX7azH9bfvCRgH13xoOnYf2td13MyJt4rni7eC0SOwwSrd/OU/6jrmnTdaAhswEOVzjeeb1bn+jkbsF9gYE1Pbp+NTDxxaeVCOePXhwwLbiDIlEgAAoKIENgAAgIoS2AAAACpKYAMAAKgogQ0AAKCiBDYAAICKEtgAAAAqSmADAACoKBtnQx9c86Hp+OQDX+w67s3nTtjwFliXGz9zS9x4561B767ZNh2wqaTiueLOW2LrrvrK43LEK//t2Zg7NxtUh8AGfTBVXAw0Dt3Wddz50y2BDViX+q039PR8A2xu5XNFeawo53j14cMCW8WYEgkAAFBRAhsAAEBFCWwAAAAVJbABAABUlMAGAABQUQIbAABARQlsAAAAFSWwAQAAVJSNsxm4d0634sxLJ7uO2/mZWxc2oB5n9b0fid2H9nUdV26ubRNLqu5L99wdg1TfsS3G2dZd9fj84fsC6K/Wid8Xx1tdx22G65KIFDvvvDXeO3dhxVHlNUl5bcJgCGwM3JmXmvHyt5/qOu66x+tx/e17YpzdWDz5l0c3R+95JM682D3kwrCklOIff/LDABgpuXhR9LnX4tWHD688LhXXJT8b/+uS8vv8+N9+ruuw8sV3gW1wTIkEAACoKIENAACgogQ2AACAihLYAAAAKkpgAwAAqCiBDQAAoKIENgAAgIoS2AAAACrKxtlU1qv/cDi27jq+4pi9Xz8Y1+2sBwBA3+Terkuu2Tbd08bTsBoCG5V15qVmRHmsoHFon8AGAPRdL9clW3fVBTY2nCmRAAAAFSWwAQAAVJTABgAAUFECGwAAQEUJbAAAABUlsAEAAFSUwAYAAFBRAhsAAEBF2TibkXb0nke6jtm6sx6fP3JfwEb77W9fiNTDuC/dc3cwHloz5+IXv/x113G//ecXA1brndOtOPPSye7j3jgbVNP54u/wiZu/03Xc3q8djL1fPxjQC4ENYI1++vgTC0c3Atv4aJ2dib/8q78O6Ifzp8/Gy99+KgAuZ0okAABARQlsAAAAFSWwAQAAVJTABgAAUFECGwAAQEWVga0VAAAAVE2rlrPABgAAUDW5CGz2YRuQ5pPHuo65bmc9rr99T4yyXr7Pf3mxGYM09/ZsZR//1onfF8dbXcfNnZuN9Sp/r14eh52fuTWmtk0HMFzlz30vP7P1Wz9SHDcErMb50zNjf04of4beeP5E13Hl+XHQqnxOfvO5E/He2ytfd8zNrP+6hN5NpqTCNgi9bIS5+9C+kQ9sVdzws3zCrurj/+Zzr8WrDx+OQXjz+dcWjm6uP7xnpANbeQI808OLAnNvD+5k08tGy/v//R022B6iZ3756/hFcXQzM3MuBqXX5669XzsosFVd8RL5//mb7n+XG/HiXK/OvHhy4VhRKl7M/Nnovpj8Xo8/Q8PQ0zl5GI9/znH8756N82+IB1WRcjTLCpu/EWBslBXcUz28ajlIP338iZ7GCWzDc/yV/9vz3xOsXq7c8xIwOmo551MBAABApaRabtZMiQQAAKienGOmljq1ZgAAAFAlOUWcqnXSvAobAABAxXTmaydr8xMTxwMAAIBKSbX2TC3mrWEDAAComvb05PFazDabobU/AABAlbSi1WzVFt9pBgAAAFXRLN+k8s3E9EcfTSndGwAAAFRAfrp94fUvLlTYarmm8QgAAEBV5HilvFkIbJ2J+WYAAABQBblIaUfKOwuBbb6jtT8AAEBVlB0iy9uLTUdmm82cNR4BAAAYtlw2HGk1Fzr51y59NIUqGwAAwJClyK8s3b8U2GqddDQAAAAYppwiLmWz2mUfVWEDAAAYspw7l7JZuvwTk1t2ny1u6gEAAMAwnG1fOPXhpXdqH/ikKhsAAMCw5PdnsvcFttRJzwQAAADDkFPKv7j8A+8LbHOTcSQAAAAYjnbtyOXvpg9+fmJ698mUohEAAAAMTI44OX/h1Mcu/9gH17BFUYIzLRIAAGDQUj7ywQ9dEdgi154OAAAABimnTuenH/xgWm6k9v4AAACDs9x0yFLtKsMfCwAAAAZjmemQpeUDm2mRAAAAg7LsdMhSutpXmBYJAADQf1ebDlmqXf2r0kMBAABAX6W4eqf+q1bYot6oT76bzwYAAAD9kts5fSxmm83lPnn1Clur2SreHgkAAAD6IxeZ6yphrVRb+YvT/QEAAEA/5BxpxQ79KbrQfAQAAGDjrdRsZMnKFbaFX0XzEQAAgA2We5nR2DWwtafjx8VNKwAAANgQRXWtOR9xtNu47hW2svmIKhsAAMDGSXnFZiOXhkUvLrb4PxnWsgEAAKzXiq38L9e9wlZSZQMAANgQOeVHewlrpd4qbCVVNgAAgPXqubpW6q3CVlJlAwAAWJfVVNdKvVfYSqpsAAAAa7Kw71pOn15NYOu9wlZSZQMAAFiTlPNPVxPWFr4mVquosk28m48VX9gIAAAAulqorl049bFYpdVV2EpllS2lbwUAAAC9yJHT/bEGq6+wLZrcsvtwcXMgAAAAWMlT7QunDsUarL7Ctqid01eKm1YAAABwNWUb//tijSZirdqtVm1yx5aiRncgAAAAuFLO3+/Mnno61mjNUyKXTGzZfVIDEgAAgPdba6ORy615SuSSdHFqJAAAAH+QF/ZcW6e1T4lc1Gm3mrWp7TuK6HZHAAAAsO6pkEvWPSVyyeSW3ceKm30BAACwiW3EVMgl654SuaSd0xdD10gAAGATK8La2Y2YCrlk3VMiL2m3WjG1492iZPfZAAAA2HxyLdJ/7cw2/3dskI0LbFFuMNB6wXo2AABgc8oPtS+cuj820IatYbuk3qhPvpsPh/VsAADAJrGwbu3a9IloNTd0mdjGB7bSdKMxmXLZhKQeAAAAY2whrJXr1mabzdhgG9Z05H3KP+jFJiQAAADjLKecvtqPsFba0DVslyv3Z4upHTOakAAAAGMr5++3Z089Gn3St8BWWmhCMrkjRYoDAQAAME5yvr89+/r3oo/6GthKRaXtSJrcvielpAkJAAAwFnLOj87Pvv6t6LP+NB35IJ0jAQCAcZHiWPv8qU/EAPSn6cgHtZqt9rXpYHHveAAAAIyqMqxdkz4dAzKYCtuS6UZjIuXDxW/aCAAAgBHSz/b9VzPYwFYS2gAAgBEzjLBWGnxgKwltAADAiBhWWCsNZg3bBxXfaPENW9MGAABUW4pjwwprF3/7YdI9EgAAqKqlBiOtZiuGZDgVtiVl98gLp27LOT8WAAAAFVHuszbssFbq+8bZvcjtmadrkztSkWAPBAAAwDDlfP/CptizrdkYskoEtlKn3ToitAEAAEOUi0ByX3v21A+iIoa7hm0Zk9ONAznlR3SQBAAABiVHnE05HWrPNo9EhVQusC3Q9h8AABiUsrlIJx0aVifIlQy36cjVlG3/r023FTn3x7EQdgEAADZcLjPHQnORCoa1UmXWsF1htjXbac/8KqZ2zBSVttuLj2wJAACADVBOgaxF+i/tC6fur0Jzkaup5pTID7o4RfI3xR92TwAAAKxdXpwC+edVrapdrroVtsu1W63cnnlosYvk/hiVoAkAAFRJOQXyofaF1w+VGSNGwOgFH9U2AABgdXKR1Jopp6+0Z5tHY4SMRoXtcqptAABAjxbb9T8wP3vqUKfdOhUjZrTDzsVq24PFN/GFENwAAIA/yMV/R9qRvjoKa9WuZixCzsR048uR8ndMkwQAgE1vYfpjpPSt+fPNZ2LEjd6UyGXkduv40jTJnGJ3Edx2BAAAsJmUQa21MP1xOn01v918JcbA+E0jLKdJRue7KaV7wzRJAAAYd0tB7aH2dDwUreZIdH/s1fgGGsENAADG2VgHtSXjH2QWg1uktL/4ZhshvAEAwCjbFEFtyeYJLwvBLQ4sNidphOAGAACjZFMFtSWbMrSUXSVT5C8V3/2BENwAAKCq8uLbI8Vl+/2jtun1RtjcYaWouk2mzjdypLtU3QAAoDI2ZTVtOQLKosnpxoEcnXutdQMAgKG4GNIiPxa59vRmrKYtRyhZxjLhreSxAgCAjbMw3bFIac2U8jNC2vKEkC6mphr75muxv5byXTnFvuIBqy9+ymMHAAC9y4tvWinH8U5OT0904rdzc83jwVUJHatUVt86OT5ei9ifa3mfChwAAFwhX7pTVtByOt6JOFJL8Yoq2uoIGetVb9QnZ2NfROdAUcb9d1HLjeJfZ+OyStwSjzUAAOMkf+CdVnHBuxDO5osKWpqIU1OdeGV2ttkM1kyI6JfFIJdrUc/zsbtW6zRSrm3PkRvlp/NSZS5FfZlwBwAAQ1eGsOLNQofGlC7eT5GaOXVmOp1aM6X5Vm1+4pWJiWgJZv3xr/i3C1bg335lAAAAAElFTkSuQmCC"})})},jt=n(65),wt=n.n(jt),_t=n(174),Et=n.n(_t),yt=function(){var e=lt();return Object(a.jsxs)("div",{className:Et.a.container,children:[Object(a.jsx)(Ve,{className:Et.a.badge,children:e("msg_tv_channel_missing_badge")}),Object(a.jsx)(Ve,{className:Et.a.infoText,children:e("msg_tv_channel_missing_message")})]})},Ct=n(175),Vt=n.n(Ct),xt=function(){var e=lt();return Object(a.jsxs)("div",{className:Vt.a.container,children:[Object(a.jsx)(Ve,{className:Vt.a.badge,children:e("msg_tv_screen_blocked_badge")}),Object(a.jsx)(Ve,{className:Vt.a.infoText,children:e("msg_tv_screen_blocked_message")})]})},Ft=n(317),Ht=n.n(Ft),Nt=n.p+"static/media/donut.8265b4f8.gif",Bt=n(66),St=n.n(Bt),Tt=function(){var e=Object(o.useContext)(At).device,t=lt();return Object(a.jsxs)("div",{className:St.a.container,children:[Object(a.jsx)("img",{src:Nt,className:St.a.donut,alt:"Donut"}),Object(a.jsx)(Ve,{className:St.a.badge,children:t("msg_tv_register_badge")}),Object(a.jsx)(Ve,{className:St.a.qrCodeInfoText,children:t("msg_tv_register_message")}),Object(a.jsxs)("div",{className:St.a.codeContainer,children:[Object(a.jsx)(Ht.a,{className:St.a.qrCode,value:"".concat(g.cmsUrl,"add?registrationCode=").concat(null===e||void 0===e?void 0:e.registrationCode),includeMargin:!0,size:232}),Object(a.jsx)(Ve,{className:St.a.registrationCode,children:null===e||void 0===e?void 0:e.registrationCode})]}),Object(a.jsxs)("div",{className:St.a.registrationCodeInfoTextContainer,children:[Object(a.jsx)(Ve,{className:St.a.registrationCodeInfoText,children:t("msg_tv_register_code_message")}),Object(a.jsx)(Ve,{className:St.a.registrationCodeInfoText,children:"".concat(g.cmsUrl,"add")})]})]})},Rt=n(176),It=n.n(Rt),kt=function(){var e=lt();return Object(a.jsxs)("div",{className:It.a.container,children:[Object(a.jsx)(Ve,{className:It.a.badge,children:e("msg_tv_overscan_badge")}),Object(a.jsx)(Ve,{className:It.a.infoText,children:e("msg_tv_overscan_message")})]})},Mt=n(318),Lt=(ht={},Object(ut.a)(ht,X.Rotation_0,0),Object(ut.a)(ht,X.Rotation_90,90),Object(ut.a)(ht,X.Rotation_180,180),Object(ut.a)(ht,X.Rotation_270,270),ht),Pt=function(){var e=Object(o.useContext)(At).screen,t=(null===e||void 0===e?void 0:e.rotation)||X.Rotation_0;Object(o.useLayoutEffect)((function(){function e(){var e=window.innerWidth,n=window.innerHeight,r=e/E,i=n/y,a=Math.min(r,i),o=t===X.Rotation_0||t===X.Rotation_180;document.body.style.position="absolute",document.body.style.transformOrigin="center center",document.body.style.transform="rotate(".concat(Lt[t],"deg) scale(").concat(a,")"),document.body.style.width="".concat(o?E:y,"px"),document.body.style.height="".concat(o?y:E,"px"),document.body.style.top="50%",document.body.style.left="50%",document.body.style.marginLeft="-".concat(o?960:540,"px"),document.body.style.marginTop="-".concat(o?540:960,"px")}var n=Object(Mt.debounce)(e,200);return window.addEventListener("resize",n),e(),function(){window.removeEventListener("resize",n),document.body.style.transformOrigin="",document.body.style.transform="",document.body.style.width="",document.body.style.height=""}}),[t])},Dt=function(){return(new Date).toTimeString().substr(0,5)},Wt=function(e){var t,n=e.screen,r=Object(o.useState)(Dt),i=Object(T.a)(r,2),c=i[0],s=i[1];return Object(o.useEffect)((function(){var e=setInterval((function(){return s(Dt())}),1e3);return function(){return clearInterval(e)}}),[]),Object(a.jsxs)("div",{className:wt.a.screenNameContainer,children:[Object(a.jsx)("img",{src:null===(t=n.organization)||void 0===t?void 0:t.avatar,className:wt.a.organizationLogo,alt:"Organization logo"}),Object(a.jsxs)("div",{className:wt.a.infoBlock,children:[Object(a.jsx)("div",{className:wt.a.screenTime,children:c}),Object(a.jsx)("div",{className:wt.a.screenName,children:null===n||void 0===n?void 0:n.name})]})]})},Zt=function(){var e=Object(o.useState)(!1),t=Object(T.a)(e,2),n=t[0],r=t[1],i=Object(o.useRef)(null);Pt();var c=Object(o.useContext)(At),s=c.screen,l=c.screenBlocked,A=c.activeView;Object(o.useEffect)((function(){var e,t=null===i||void 0===i?void 0:i.current,n=function(){e&&clearTimeout(e),r(!0),e=setTimeout((function(){r(!1)}),2e3)};return t&&(t.addEventListener("mousemove",n),t.addEventListener("click",n)),function(){clearTimeout(e),t&&(t.removeEventListener("mousemove",n),t.removeEventListener("click",n))}}),[]);return Object(a.jsxs)("div",{className:Ee()(wt.a.app,Object(ut.a)({},wt.a.noCursor,!n)),ref:i,children:[l?Object(a.jsx)(xt,{}):s?s.organization?A===C.Overscan?Object(a.jsx)(kt,{}):s.subscribedChannel||s.subscribedShow?Object(a.jsxs)("div",{className:wt.a.appContent,children:[Object(a.jsx)(vt,{}),Object(a.jsx)("div",{className:Ee()(wt.a.showLogo,Object(ut.a)({},wt.a.showLogoVisible,n)),children:Object(a.jsx)(Ot,{})})]}):Object(a.jsx)(yt,{}):Object(a.jsx)(Tt,{}):null,s&&s.organization&&s.isScreenInfoVisible&&Object(a.jsx)(Wt,{screen:s}),Object(a.jsx)(we.a,Object(L.a)({},et))]})},qt=n.p+"static/media/maintenance.6559c2b2.png";function zt(){return(zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ut(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Gt=o.createElement("g",{opacity:.07},o.createElement("g",{clipPath:"url(#clip0)"},o.createElement("path",{d:"M378.02 113.939H196.447V363.988H378.02V113.939Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M310.667 646.31H129.094V896.359H310.667V646.31Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M140.319 703.841H112.536V768.668H140.319V703.841Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M44.3408 703.841H16.5576V768.668H44.3408V703.841Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M72.124 768.949H44.3408V833.776H72.124V768.949Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M99.9073 833.776H72.1241V898.604H99.9073V833.776Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M127.69 898.604H99.9073V963.431H127.69V898.604Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M155.474 963.431H127.69V1028.26H155.474V963.431Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M44.3408 896.359H16.5576V961.186H44.3408V896.359Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M72.124 961.467H44.3408V1026.29H72.124V961.467Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M112.536 646.31H84.7527V703.841H112.536V646.31Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M16.5577 646.31H0V703.841H16.5577V646.31Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M292.144 916.284H155.474V957.257H292.144V916.284Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M428.815 995.985H292.144V1036.96H428.815V995.985Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M565.486 750.988H428.815V791.961H565.486V750.988Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M798.977 750.988H662.306V791.961H798.977V750.988Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M921.616 1000.48H784.945V1041.45H921.616V1000.48Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M411.135 667.638H274.464V708.612H411.135V667.638Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M411.135 834.618H274.464V875.591H411.135V834.618Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M674.093 662.868H537.422V703.841H674.093V662.868Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M134.987 50.5149H-1.68378V91.4881H134.987V50.5149Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M926.948 662.868H790.277V703.841H926.948V662.868Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M926.948 834.618H790.277V875.591H926.948V834.618Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M674.093 834.618H537.422V875.591H674.093V834.618Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M718.995 392.052H537.422V642.1H718.995V392.052Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1090.28 646.31H908.707V896.359H1090.28V646.31Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1455.39 -0.841888H1273.82V115.623H1455.39V-0.841888Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1189.35 791.961H1159.6V834.338H1189.35V791.961Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1185.14 918.81H1155.39V952.767H1185.14V918.81Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1122.27 997.389H1092.52V1041.45H1122.27V997.389Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1214.88 997.389H1185.14V1041.45H1214.88V997.389Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1214.88 874.75H1185.14V918.81H1214.88V874.75Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M816.938 0.841888H787.19V43.2183H816.938V0.841888Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M812.448 127.69H782.7V161.648H812.448V127.69Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M812.448 250.61H782.7V294.67H812.448V250.61Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M842.196 206.55H812.448V250.61H842.196V206.55Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M842.196 83.6302H812.448V127.69H842.196V83.6302Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1107.4 874.75H1077.65V918.81H1107.4V874.75Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1455.39 392.052H1273.82V642.1H1455.39V392.052Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M718.995 0H537.422V142.003H718.995V0Z",fill:"#F5F6F6"}),o.createElement("path",{d:"M1090.28 142.003H908.707V392.052H1090.28V142.003Z",fill:"#F5F6F6"}))),Qt=o.createElement("defs",null,o.createElement("clipPath",{id:"clip0"},o.createElement("rect",{width:1624.9,height:1319,fill:"white"})));function Xt(e,t){var n=e.title,r=e.titleId,i=Ut(e,["title","titleId"]);return o.createElement("svg",zt({width:1440,height:1001,viewBox:"0 0 1440 1001",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?o.createElement("title",{id:r},n):null,Gt,Qt)}var Kt=o.forwardRef(Xt),Yt=(n.p,n(137)),Jt=n.n(Yt),$t=function(){var e=Object(it.e)(),t=lt();return Pt(),ve({variables:{id:je.get("deviceId")},pollInterval:3e4,onCompleted:function(){e.replace(r.Home)},fetchPolicy:"network-only"}),Object(a.jsxs)("div",{className:Jt.a.container,children:[Object(a.jsx)(Kt,{className:Jt.a.bgImage}),Object(a.jsx)("img",{src:qt,className:Jt.a.image,alt:"maintenance"}),Object(a.jsx)(Ve,{className:Jt.a.headline,styleType:Oe.MediumHeadline,children:t("msg_tv_maintenance_page_headline")}),Object(a.jsx)(Ve,{children:t("msg_tv_maintenance_page_body")})]})},en=n(668).a((function(e){var t=e.children;return Object(a.jsx)(a.Fragment,{children:t})})),tn=n(319),nn=n.n(tn),rn=function(){var e=Object(it.e)();Pt();var t=Object(o.useRef)(null),n=Object(o.useContext)(At);return Object(o.useEffect)((function(){n.videoStream&&t.current?t.current.srcObject=n.videoStream:e.push("/")}),[n.videoStream,e]),Object(a.jsx)("div",{className:Ee()(nn.a.screensharingPage),children:Object(a.jsx)("video",{height:"100%",width:"100%",ref:t,autoPlay:!0,playsInline:!0,muted:!0})})};O.info("Starting..."),O.info("App config - ".concat(JSON.stringify(g))),g.sentryDsn&&l.a({dsn:g.sentryDsn,release:g.sentryRelease,integrations:[new A.a.BrowserTracing],tracesSampleRate:.2}),window.addEventListener("beforeunload",(function(){O.info("Quiting...")})),s.a.render(Object(a.jsx)(d.ApolloProvider,{client:H,children:Object(a.jsx)(o.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading... "}),children:Object(a.jsx)(en,{children:Object(a.jsx)(it.c,{history:w,children:Object(a.jsx)(dt,{children:Object(a.jsxs)(it.d,{children:[Object(a.jsx)(it.b,{path:r.Home,exact:!0,children:Object(a.jsx)(Zt,{})}),Object(a.jsx)(it.b,{path:r.Maintenance,exact:!0,children:Object(a.jsx)($t,{})}),Object(a.jsx)(it.b,{path:r.Screensharing,exact:!0,children:Object(a.jsx)(rn,{})}),Object(a.jsx)(it.b,{path:"*",children:Object(a.jsx)(it.a,{to:r.Home})})]})})})})})}),document.getElementById("root"))},66:function(e,t,n){e.exports={container:"RegisterView_container__1n5OD",badge:"RegisterView_badge__L7Yla",donut:"RegisterView_donut__3nlfV",qrCodeInfoText:"RegisterView_qrCodeInfoText__2n_np",registrationCode:"RegisterView_registrationCode__Y77NX",codeContainer:"RegisterView_codeContainer__1wr3y",registrationCodeInfoTextContainer:"RegisterView_registrationCodeInfoTextContainer__D-CG-",registrationCodeInfoText:"RegisterView_registrationCodeInfoText__3R5P5",qrCode:"RegisterView_qrCode__3RAhF"}},90:function(e,t,n){e.exports={toastContainer:"Toastify_toastContainer__1TFBs",toast:"Toastify_toast__35fLx",toastInfo:"Toastify_toastInfo__3tY_f",loadingIcon:"Toastify_loadingIcon__16Iqs",toastTitle:"Toastify_toastTitle__sfHZr",toastError:"Toastify_toastError__1qNki"}}},[[659,1,2]]]);
//# sourceMappingURL=main.597d5cc3.chunk.js.map